<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Count & XSS Test</title>
    <script>
        function toggleExplanation() {
            var explanation = document.getElementById("explanation");
            if (explanation.style.display === "none") {
                explanation.style.display = "block";
            } else {
                explanation.style.display = "none";
            }
        }
    </script>
</head>
<body>
    <h1>Benutzeranzahl & XSS Test</h1>

    <h2>ğŸ‘¥ Aktuelle Anzahl der Benutzer: {{ user_count }}</h2>

    <h2>XSS Test</h2>
    <form method="POST">
        <label for="comment">Schreibe einen Kommentar:</label>
        <input type="text" id="comment" name="comment" required>
        <button type="submit">Senden</button>
    </form>

    <h3>Letzter Kommentar:</h3>
    <p>{{ last_comment | safe }}</p>

    <button onclick="toggleExplanation()">ErklÃ¤rung anzeigen</button>

    <form method="POST" action="/reset_db">
        <button type="submit" style="margin-top: 20px; background-color: red; color: white; border: none; padding: 10px;">ğŸ”„ Datenbank zurÃ¼cksetzen</button>
    </form>

    <div id="explanation" style="display: none; margin-top: 20px; padding: 10px; border: 1px solid #ccc;">
        <h2>ğŸ” Was ist Cross-Site Scripting (XSS)?</h2>
        <p><strong>Cross-Site Scripting (XSS)</strong> ist eine SicherheitslÃ¼cke, bei der ein Angreifer bÃ¶sartigen JavaScript-Code in eine Webseite einschleust.</p>
        
        <h3>ğŸ›  Wie funktioniert der Angriff?</h3>
        <p>Viele Webseiten erlauben Benutzereingaben, z. B. Kommentare oder Suchfelder. Wenn diese Eingaben ungefiltert gespeichert und an andere Nutzer zurÃ¼ckgegeben werden, kann ein Angreifer JavaScript-Code einschleusen.</p>
    
        <h3>ğŸš¨ Beispiel fÃ¼r eine XSS-Schwachstelle</h3>
        <p>Angreifer geben in ein unsicheres Eingabefeld folgenden Code ein:</p>
        <pre>&lt;script&gt;alert('Diese Seite ist gehackt!')&lt;/script&gt;</pre>
        <p>Wenn die Webseite diese Eingabe speichert und ungefiltert ausgibt, fÃ¼hrt der Browser den JavaScript-Code aus â€“ was zu einem Angriff fÃ¼hren kann.</p>
    
        <h3>ğŸ¯ Welche Gefahren gibt es?</h3>
        <ul>
            <li>ğŸ”‘ Diebstahl von Cookies â€“ Der Angreifer kann sich als anderer Benutzer ausgeben.</li>
            <li>ğŸ’» Schadcode ausfÃ¼hren â€“ Besucher der Webseite kÃ¶nnten auf eine Fake-Seite umgeleitet werden.</li>
            <li>ğŸ“© Phishing-Angriffe â€“ Nutzer kÃ¶nnten gefÃ¤lschte Login-Seiten sehen.</li>
        </ul>
    
        <h3>ğŸ›¡ SchutzmaÃŸnahmen gegen XSS</h3>
        <p>Um XSS zu verhindern, sollten Webseitenentwickler folgende MaÃŸnahmen umsetzen:</p>
        <ul>
            <li>âœ¨ HTML-Escaping: Spezielle Zeichen wie `<` oder `>` als `&lt;` und `&gt;` speichern.</li>
            <li>ğŸ”’ Content Security Policy (CSP): BeschrÃ¤nkt, welche Skripte ausgefÃ¼hrt werden dÃ¼rfen.</li>
            <li>âœ… Eingaben validieren & bereinigen: Keine gefÃ¤hrlichen Zeichen in Eingabefeldern erlauben.</li>
        </ul>
    
        <h3>ğŸš€ Fazit</h3>
        <p>XSS ist eine der hÃ¤ufigsten SicherheitslÃ¼cken im Web. Durch saubere Programmierung und SicherheitsmaÃŸnahmen kann man solche Angriffe verhindern.</p>
    
        <p>ğŸ” **Merke:** Jede Webseite, die Benutzereingaben speichert oder anzeigt, sollte auf XSS-Schutz achten!</p>
    </div>
    
</body>
</html>
